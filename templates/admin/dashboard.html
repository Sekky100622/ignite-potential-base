{% extends 'base.html' %}
{% block title %}ç®¡ç†ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ | Ignite Potential Base{% endblock %}

{% block extra_head %}
<style>
  .stat-card {
    background: var(--navy-light);
    border: 1px solid rgba(255,255,255,.08);
    border-radius: 12px;
    padding: 1.5rem;
    display: flex;
    align-items: center;
    gap: 1rem;
  }
  .stat-icon {
    width: 52px;
    height: 52px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    flex-shrink: 0;
  }
  .stat-num { font-size: 1.75rem; font-weight: 800; line-height: 1; }
  .stat-label { font-size: .8rem; color: var(--gray-400); margin-top: .2rem; }
</style>
{% endblock %}

{% block content %}
<div class="page-header">
  <div class="container">
    <div style="display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:1rem;">
      <div>
        <h1>âš™ï¸ ç®¡ç†ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</h1>
        <p>Ignite Potential Base ç®¡ç†è€…å‘ã‘</p>
      </div>
      <div style="display:flex;gap:.75rem;flex-wrap:wrap;">
        <a href="{{ url_for('admin_articles_new') }}" class="btn btn-primary">+ è¨˜äº‹ã‚’ä½œæˆ</a>
        <a href="{{ url_for('admin_videos_new') }}" class="btn btn-outline">+ å‹•ç”»ã‚’è¿½åŠ </a>
      </div>
    </div>
  </div>
</div>

<section class="section-sm">
  <div class="container">
    <!-- Stats -->
    <div class="grid grid-3" style="margin-bottom:2rem;">
      <div class="stat-card">
        <div class="stat-icon" style="background:rgba(249,115,22,.15);">ğŸ“„</div>
        <div>
          <div class="stat-num">{{ article_count }}</div>
          <div class="stat-label">ç·è¨˜äº‹æ•°</div>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon" style="background:rgba(34,197,94,.15);">ğŸ‘¥</div>
        <div>
          <div class="stat-num">{{ member_count }}</div>
          <div class="stat-label">ç·ãƒ¡ãƒ³ãƒãƒ¼æ•°</div>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon" style="background:rgba(249,115,22,.15);">â­</div>
        <div>
          <div class="stat-num">{{ premium_count }}</div>
          <div class="stat-label">ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ä¼šå“¡</div>
        </div>
      </div>
    </div>

    <div style="display:grid;grid-template-columns:1fr 1fr;gap:1.5rem;">
      <!-- Recent articles -->
      <div style="background:var(--navy-light);border:1px solid rgba(255,255,255,.08);border-radius:12px;padding:1.5rem;">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:1.25rem;">
          <h3 style="font-size:1rem;font-weight:700;">æœ€æ–°è¨˜äº‹</h3>
          <a href="{{ url_for('admin_articles') }}" class="btn btn-ghost btn-sm">ç®¡ç†ã™ã‚‹</a>
        </div>
        {% for article in recent_articles %}
        <div style="display:flex;align-items:center;gap:.75rem;padding:.6rem 0;border-bottom:1px solid rgba(255,255,255,.05);">
          <span>ğŸ“„</span>
          <div style="flex:1;min-width:0;">
            <div style="font-size:.875rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;">{{ article.title }}</div>
            <div style="font-size:.75rem;color:var(--gray-400);">
              {% if article.published %}å…¬é–‹{% else %}ä¸‹æ›¸ã{% endif %} Â·
              {% if article.is_free %}ç„¡æ–™{% else %}æœ‰æ–™{% endif %}
            </div>
          </div>
          <a href="{{ url_for('admin_articles_edit', article_id=article.id) }}" class="btn btn-ghost btn-sm">ç·¨é›†</a>
        </div>
        {% else %}
          <p class="text-gray text-sm">è¨˜äº‹ã¯ã‚ã‚Šã¾ã›ã‚“</p>
        {% endfor %}
        <div style="margin-top:1rem;">
          <a href="{{ url_for('admin_articles_new') }}" class="btn btn-primary btn-sm">+ æ–°è¦è¨˜äº‹</a>
        </div>
      </div>

      <!-- Recent members -->
      <div style="background:var(--navy-light);border:1px solid rgba(255,255,255,.08);border-radius:12px;padding:1.5rem;">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:1.25rem;">
          <h3 style="font-size:1rem;font-weight:700;">æœ€æ–°ãƒ¡ãƒ³ãƒãƒ¼</h3>
          <a href="{{ url_for('admin_members') }}" class="btn btn-ghost btn-sm">ä¸€è¦§</a>
        </div>
        {% for member in recent_members %}
        <div style="display:flex;align-items:center;gap:.75rem;padding:.6rem 0;border-bottom:1px solid rgba(255,255,255,.05);">
          <div style="width:32px;height:32px;background:var(--orange);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:.875rem;font-weight:700;flex-shrink:0;">
            {{ member.name[0] }}
          </div>
          <div style="flex:1;min-width:0;">
            <div style="font-size:.875rem;font-weight:500;">{{ member.name }}</div>
            <div style="font-size:.75rem;color:var(--gray-400);">{{ member.email }}</div>
          </div>
          <span class="badge {% if member.plan == 'premium' %}badge-premium{% else %}badge-cat{% endif %}">
            {{ member.plan }}
          </span>
        </div>
        {% else %}
          <p class="text-gray text-sm">ãƒ¡ãƒ³ãƒãƒ¼ã¯ã„ã¾ã›ã‚“</p>
        {% endfor %}
      </div>
    </div>

    <!-- Quick links -->
    <div style="display:flex;gap:.75rem;flex-wrap:wrap;margin-top:1.5rem;">
      <a href="{{ url_for('admin_articles') }}" class="btn btn-ghost">ğŸ“„ è¨˜äº‹ç®¡ç†</a>
      <a href="{{ url_for('admin_videos_new') }}" class="btn btn-ghost">ğŸ¬ å‹•ç”»è¿½åŠ </a>
      <a href="{{ url_for('admin_members') }}" class="btn btn-ghost">ğŸ‘¥ ãƒ¡ãƒ³ãƒãƒ¼ç®¡ç†</a>
    </div>
  </div>
</section>
{% endblock %}
