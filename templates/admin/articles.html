{% extends 'base.html' %}
{% block title %}è¨˜äº‹ç®¡ç† | Ignite Potential Base{% endblock %}

{% block content %}
<div class="page-header">
  <div class="container">
    <div style="display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:1rem;">
      <div>
        <h1>ğŸ“„ è¨˜äº‹ç®¡ç†</h1>
        <p>å…¨ {{ articles|length }} ä»¶ã®è¨˜äº‹</p>
      </div>
      <a href="{{ url_for('admin_articles_new') }}" class="btn btn-primary">+ æ–°è¦è¨˜äº‹</a>
    </div>
  </div>
</div>

<section class="section-sm">
  <div class="container">
    <div style="background:var(--navy-light);border:1px solid rgba(255,255,255,.08);border-radius:12px;overflow:hidden;">
      <div class="table-wrap">
        <table>
          <thead>
            <tr>
              <th>ã‚¿ã‚¤ãƒˆãƒ«</th>
              <th>ã‚«ãƒ†ã‚´ãƒªãƒ¼</th>
              <th>ç¨®åˆ¥</th>
              <th>çŠ¶æ…‹</th>
              <th>æ“ä½œ</th>
            </tr>
          </thead>
          <tbody>
            {% for article in articles %}
            <tr>
              <td style="max-width:280px;">
                <div style="font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;">{{ article.title }}</div>
                <div style="font-size:.75rem;color:var(--gray-400);">{{ article.slug }}</div>
              </td>
              <td>
                {% if article.category %}
                  <span class="badge badge-cat">{{ article.category.name }}</span>
                {% else %}
                  <span class="text-gray">-</span>
                {% endif %}
              </td>
              <td>
                {% if article.is_free %}
                  <span class="badge badge-free">FREE</span>
                {% else %}
                  <span class="badge badge-premium">PREMIUM</span>
                {% endif %}
              </td>
              <td>
                {% if article.published %}
                  <span class="badge" style="background:rgba(34,197,94,.15);color:var(--green);">å…¬é–‹</span>
                {% else %}
                  <span class="badge badge-cat">ä¸‹æ›¸ã</span>
                {% endif %}
              </td>
              <td>
                <div style="display:flex;gap:.5rem;flex-wrap:wrap;">
                  <a href="{{ url_for('article_detail', slug=article.slug) }}" class="btn btn-ghost btn-sm" target="_blank">è¡¨ç¤º</a>
                  <a href="{{ url_for('admin_articles_edit', article_id=article.id) }}" class="btn btn-outline btn-sm">ç·¨é›†</a>
                  <form action="{{ url_for('admin_articles_delete', article_id=article.id) }}" method="POST"
                        onsubmit="return confirm('ã“ã®è¨˜äº‹ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ');" style="display:inline;">
                    <button type="submit" class="btn btn-danger btn-sm">å‰Šé™¤</button>
                  </form>
                </div>
              </td>
            </tr>
            {% else %}
            <tr>
              <td colspan="5" style="text-align:center;padding:3rem;color:var(--gray-400);">
                è¨˜äº‹ã¯ã¾ã ã‚ã‚Šã¾ã›ã‚“ã€‚
                <a href="{{ url_for('admin_articles_new') }}" style="margin-left:.5rem;">æœ€åˆã®è¨˜äº‹ã‚’ä½œæˆã™ã‚‹ â†’</a>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>

    <div style="margin-top:1rem;">
      <a href="{{ url_for('admin_dashboard') }}" class="btn btn-ghost btn-sm">â† ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã¸</a>
    </div>
  </div>
</section>
{% endblock %}
