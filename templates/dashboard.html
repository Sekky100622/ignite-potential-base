{% extends 'base.html' %}
{% block title %}ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ | Ignite Potential Base{% endblock %}

{% block content %}
<div class="page-header">
  <div class="container">
    <h1>ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</h1>
    <p>ã“ã‚“ã«ã¡ã¯ã€{{ user.name }}ã•ã‚“</p>
  </div>
</div>

<section class="section-sm">
  <div class="container">
    <div style="display:grid;grid-template-columns:1fr 300px;gap:2rem;">

      <!-- Left column -->
      <div>
        <!-- Plan card -->
        <div style="background:var(--navy-light);border:1px solid {% if user.plan == 'premium' %}rgba(249,115,22,.4){% else %}rgba(255,255,255,.08){% endif %};border-radius:16px;padding:1.75rem;margin-bottom:1.5rem;">
          <div style="display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:1rem;">
            <div>
              <div style="font-size:.8rem;color:var(--gray-400);text-transform:uppercase;letter-spacing:.05em;margin-bottom:.3rem;">ç¾åœ¨ã®ãƒ—ãƒ©ãƒ³</div>
              {% if user.plan == 'premium' %}
                <div style="font-size:1.5rem;font-weight:800;color:var(--orange);">â­ ãƒ—ãƒ¬ãƒŸã‚¢ãƒ </div>
                <div class="text-gray text-sm mt-1">ã™ã¹ã¦ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã«ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½</div>
              {% else %}
                <div style="font-size:1.5rem;font-weight:800;">ãƒ•ãƒªãƒ¼ãƒ—ãƒ©ãƒ³</div>
                <div class="text-gray text-sm mt-1">ç„¡æ–™ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒåˆ©ç”¨å¯èƒ½</div>
              {% endif %}
            </div>
            {% if user.plan != 'premium' %}
              <a href="{{ url_for('subscribe') }}" class="btn btn-primary">
                â­ ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ã«ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰
              </a>
            {% else %}
              <span class="badge badge-premium" style="font-size:.875rem;padding:.4rem 1rem;">æœ‰åŠ¹</span>
            {% endif %}
          </div>
        </div>

        <!-- Recent articles -->
        <div style="background:var(--navy-light);border:1px solid rgba(255,255,255,.08);border-radius:16px;padding:1.75rem;margin-bottom:1.5rem;">
          <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:1.25rem;">
            <h3 style="font-size:1rem;font-weight:700;">æœ€æ–°è¨˜äº‹</h3>
            <a href="{{ url_for('articles') }}" class="btn btn-ghost btn-sm">ã™ã¹ã¦è¦‹ã‚‹</a>
          </div>
          {% if recent_articles %}
            {% for article in recent_articles %}
            <div style="display:flex;align-items:center;gap:.75rem;padding:.6rem 0;border-bottom:1px solid rgba(255,255,255,.05);">
              <span style="font-size:1.25rem;">{% if article.is_free %}ğŸ“„{% else %}ğŸ”’{% endif %}</span>
              <div style="flex:1;min-width:0;">
                <a href="{{ url_for('article_detail', slug=article.slug) }}"
                   style="color:var(--white);font-size:.9rem;font-weight:500;display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;">
                  {{ article.title }}
                </a>
              </div>
              {% if article.is_free %}
                <span class="badge badge-free">FREE</span>
              {% else %}
                <span class="badge badge-premium">PREMIUM</span>
              {% endif %}
            </div>
            {% endfor %}
          {% else %}
            <p class="text-gray text-sm">è¨˜äº‹ã¯ã¾ã ã‚ã‚Šã¾ã›ã‚“ã€‚</p>
          {% endif %}
        </div>

        <!-- Quick links -->
        <div style="background:var(--navy-light);border:1px solid rgba(255,255,255,.08);border-radius:16px;padding:1.75rem;">
          <h3 style="font-size:1rem;font-weight:700;margin-bottom:1.25rem;">ã‚¯ã‚¤ãƒƒã‚¯ãƒªãƒ³ã‚¯</h3>
          <div style="display:grid;grid-template-columns:1fr 1fr;gap:.75rem;">
            <a href="{{ url_for('articles') }}" class="btn btn-ghost" style="justify-content:center;">ğŸ“„ è¨˜äº‹ä¸€è¦§</a>
            <a href="{{ url_for('videos') }}" class="btn btn-ghost" style="justify-content:center;">ğŸ¬ å‹•ç”»ä¸€è¦§</a>
            {% if session.get('role') == 'admin' %}
              <a href="{{ url_for('admin_dashboard') }}" class="btn btn-ghost" style="justify-content:center;">âš™ï¸ ç®¡ç†ç”»é¢</a>
            {% endif %}
          </div>
        </div>
      </div>

      <!-- Right column / Profile -->
      <div>
        <div style="background:var(--navy-light);border:1px solid rgba(255,255,255,.08);border-radius:16px;padding:1.75rem;margin-bottom:1.5rem;">
          <div style="text-align:center;margin-bottom:1.5rem;">
            <div style="width:72px;height:72px;background:linear-gradient(135deg,var(--orange),#ea580c);border-radius:50%;margin:0 auto .75rem;display:flex;align-items:center;justify-content:center;font-size:1.75rem;font-weight:800;">
              {{ user.name[0] }}
            </div>
            <div style="font-weight:700;font-size:1.05rem;">{{ user.name }}</div>
            <div class="text-gray text-sm">{{ user.email }}</div>
            {% if user.role == 'admin' %}
              <span class="badge badge-admin mt-1">ç®¡ç†è€…</span>
            {% endif %}
          </div>

          <div style="border-top:1px solid rgba(255,255,255,.07);padding-top:1rem;">
            <div style="display:flex;justify-content:space-between;padding:.4rem 0;font-size:.875rem;">
              <span class="text-gray">ãƒ—ãƒ©ãƒ³</span>
              <span style="font-weight:600;color:{% if user.plan == 'premium' %}var(--orange){% else %}var(--white){% endif %};">
                {% if user.plan == 'premium' %}ãƒ—ãƒ¬ãƒŸã‚¢ãƒ {% else %}ãƒ•ãƒªãƒ¼{% endif %}
              </span>
            </div>
            <div style="display:flex;justify-content:space-between;padding:.4rem 0;font-size:.875rem;">
              <span class="text-gray">æ¨©é™</span>
              <span style="font-weight:600;">{{ 'ç®¡ç†è€…' if user.role == 'admin' else 'ãƒ¡ãƒ³ãƒãƒ¼' }}</span>
            </div>
          </div>
        </div>

        {% if user.plan != 'premium' %}
        <div style="background:linear-gradient(135deg,rgba(249,115,22,.12),transparent);border:1px solid rgba(249,115,22,.3);border-radius:16px;padding:1.5rem;text-align:center;">
          <div style="font-size:2rem;margin-bottom:.5rem;">â­</div>
          <h4 style="margin-bottom:.4rem;">ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ã§<br>ã‚‚ã£ã¨å­¦ã¶</h4>
          <p class="text-gray text-sm" style="margin-bottom:1rem;">æœˆé¡Â¥1,500ã§<br>å…¨ã‚³ãƒ³ãƒ†ãƒ³ãƒ„è§£æ”¾</p>
          <a href="{{ url_for('subscribe') }}" class="btn btn-primary btn-sm" style="width:100%;justify-content:center;">
            ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰
          </a>
        </div>
        {% endif %}
      </div>
    </div>

    @media (max-width: 768px) {
      .dashboard-grid { grid-template-columns: 1fr !important; }
    }
  </div>
</section>
{% endblock %}
